[gd_scene load_steps=8 format=3 uid="uid://yyibwtg1bdg7"]

[ext_resource type="PackedScene" uid="uid://bij7x1xcx8mw6" path="res://Scenes/grid_character.tscn" id="1_sc67c"]
[ext_resource type="PackedScene" uid="uid://dmnqscyj7s2gn" path="res://Models/AnimatedRobots/Mortar_Animated.tscn" id="3_550gs"]
[ext_resource type="Script" uid="uid://bqm4vddppofoy" path="res://Scripts/Character Actions/step_movement_action.gd" id="3_xrpp3"]
[ext_resource type="Texture2D" uid="uid://c8ofc3ddbw0od" path="res://Art/Images/Action Icons/walk.png" id="4_xrpp3"]
[ext_resource type="PackedScene" uid="uid://dguy8abn6c6up" path="res://Scenes/VFXScene/unit_indicator.tscn" id="5_0g845"]
[ext_resource type="Script" uid="uid://q2u6hxbk8u86" path="res://Scripts/Character Actions/artillery_attack_action.gd" id="5_5ef2r"]
[ext_resource type="Texture2D" uid="uid://depfvqrthpp5r" path="res://Art/Images/Action Icons/fire.png" id="6_xrpp3"]

[node name="Mortar" node_paths=PackedStringArray("actionAnimPlayer") instance=ExtResource("1_sc67c")]
characterClass = 1
actionAnimPrefix = "Mortar/"
actionAnimPlayer = NodePath("Visuals/Mortar_idle/AnimationPlayer")

[node name="Mortar_idle" parent="Visuals" index="0" instance=ExtResource("3_550gs")]
transform = Transform3D(-0.5, 0, -4.37114e-08, 0, 0.5, 0, 4.37114e-08, 0, -0.5, 0, 0.1, 0)

[node name="Gun3_2" parent="Visuals/Mortar_idle/Armature_003/Skeleton3D" index="0"]
transform = Transform3D(1, -2.92181e-08, 4.4421e-08, -5.51745e-08, -0.512566, 0.818641, -1.30114e-09, -0.720457, -0.574164, -4.20231e-09, 0.245637, -0.781611)

[node name="Gun2_2" parent="Visuals/Mortar_idle/Armature_003/Skeleton3D" index="1"]
transform = Transform3D(1, -2.92181e-08, 4.4421e-08, -5.51745e-08, -0.512566, 0.818641, -1.30114e-09, -0.720457, -0.574164, -4.2023e-09, 0.245637, -0.78161)

[node name="Gun1_2" parent="Visuals/Mortar_idle/Armature_003/Skeleton3D" index="2"]
transform = Transform3D(1, -2.92181e-08, 4.4421e-08, -5.51745e-08, -0.512566, 0.818641, -1.30116e-09, -0.720457, -0.574164, -4.2023e-09, 0.245637, -0.78161)

[node name="Shield" parent="Visuals/Mortar_idle/Armature_003/Skeleton3D" index="3"]
transform = Transform3D(1, -3.28873e-08, 4.4321e-08, -5.51745e-08, -0.576793, 0.816891, -1.30119e-09, -0.816891, -0.576792, -1.56737e-08, 0.0431244, -1.01055)

[node name="Frame" parent="Visuals/Mortar_idle/Armature_003/Skeleton3D" index="4"]
transform = Transform3D(1, -1.42109e-14, -7.10543e-15, 1.06581e-14, -0.375921, 0.926652, -1.42109e-14, -0.926652, -0.375921, -8.50526e-15, 0.0702619, -0.348832)

[node name="Tread1" parent="Visuals/Mortar_idle/Armature_003/Skeleton3D" index="5"]
transform = Transform3D(1, 7.10543e-15, 0, 0, 0, 1, 7.10543e-15, -1, 0, 0.572157, 0.283051, -0.193911)

[node name="Tread2" parent="Visuals/Mortar_idle/Armature_003/Skeleton3D" index="6"]
transform = Transform3D(1, 7.10543e-15, 0, 0, 0, 1, 7.10543e-15, -1, 0, -0.587285, 0.283051, -0.193911)

[node name="StepMovementAction" type="Node" parent="Actions" index="0"]
script = ExtResource("3_xrpp3")
directions = Array[Vector2i]([Vector2i(1, 0), Vector2i(0, 1), Vector2i(-1, 0), Vector2i(0, -1)])
stepRange = 2
actionIcon = ExtResource("4_xrpp3")
metadata/_custom_type_script = "uid://bqm4vddppofoy"

[node name="ArtilleryAttackAction" type="Node" parent="Actions" index="1"]
script = ExtResource("5_5ef2r")
damage = 2
selfDamage = 1
directions = Array[Vector2i]([Vector2i(1, 0), Vector2i(0, 1), Vector2i(-1, 0), Vector2i(0, -1)])
ranges = Array[Vector2i]([Vector2i(2, 5), Vector2i(2, 5), Vector2i(2, 5), Vector2i(2, 5)])
actionIcon = ExtResource("6_xrpp3")
metadata/_custom_type_script = "uid://q2u6hxbk8u86"

[node name="UnitIndicator" parent="Visuals_Stationary" index="0" instance=ExtResource("5_0g845")]
transform = Transform3D(0.475, 0, 0, 0, 0.475, 0, 0, 0, 0.475, 0, 0, 0)

[connection signal="actions_available_updated" from="." to="Visuals_Stationary/UnitIndicator" method="set_visible"]
[connection signal="action_use_success" from="Actions/ArtilleryAttackAction" to="." method="PlayActionAnimation" binds= [0]]

[editable path="Visuals/Mortar_idle"]
[editable path="Visuals/Mortar_idle/Armature_003/Skeleton3D/Gun3_2/Gun3_2/TestSmoke1"]
